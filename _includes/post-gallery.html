<div class="gallery--wrapper">
	<div class="gallery--button" onclick="openGallery()" style="background-image: url({{ feature_image | prepend: site.baseurl }})">
		<h2>Zobacz galeriÄ™</h2>
	</div>
	<div id="gallery">
		<div class="backdrop" onclick="closeGallery()"></div>
		{% assign imgs = include.images | split: "," %}
        {% for img in imgs %}
          <img class="gallery--photo" src="{{ img }}">
        {% endfor %}
        <div class="gallery--nav gallery--nav--next" onclick="scrollGallery(1)"></div>
        <div class="gallery--nav gallery--nav--prev" onclick="scrollGallery(-1)"></div>
    </div>
</div>


<script>
var gallery = document.getElementById('gallery');
var images = gallery.getElementsByTagName('img');
var backdrop = gallery.querySelector('.backdrop');
// var right = gallery.querySelector('.gallery--nav--next');
// var left = gallery.querySelector('.gallery--nav--prev');
var current = 0;

document.addEventListener('keydown', function(e) {
  if (e.code == 'ArrowLeft') {
    scrollGallery(-1);
  }

  else if (e.code == 'ArrowRight') {
    scrollGallery(1);
  }

  else if (e.code == 'Escape') {
    closeGallery();
  }
});

function openGallery() {

	gallery.style.display = 'block';
	images[0].style.display = 'block';
	current = 0;
	document.body.style.overflow = 'hidden';
}

function scrollGallery(dir) {
	function mod(n, m) {
	  return ((n % m) + m) % m;
	}

	images[current].style.display = 'none';
	current = mod(current + dir, images.length);
	images[current].style.display = 'block';
}

function closeGallery() {
	gallery.style.display = 'none';
	images[current].style.display = 'none';
	document.body.style.overflow = 'initial';
}

</script>